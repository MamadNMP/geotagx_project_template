<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
<div class="row alerts hide"><!-- Success and error messages. -->
    <div id="alerts-column" class="col-md-6 col-md-offset-2">
        <div id="success"       class="alert alert-success"><strong>Well done!</strong> Your answer has been saved.<a class="close">×</a></div>
        <div id="loading"       class="alert alert-info"><span>Loading next task...</span><a class="close">×</a></div>
        <div id="taskcompleted" class="alert alert-info"><strong>The task has been completed!</strong> Thanks a lot!</div>
        <div id="finish"        class="alert alert-success"><strong>Congratulations!</strong> You have participated in all available tasks!<br>
            <div class="alert-actions">
                <a class="btn small" href="/">Go back</a>
                <a class="btn small" href="/app">or, Check other projects</a>
            </div>
        </div>
        <div id="error" class="alert alert-danger"><strong>Error!</strong> Something went wrong, please contact the site administrators<a class="close">×</a></div>
    </div>
</div>
<div class="row skeleton"><!-- Skeleton row. -->
    <section id="questionnaire-section" class="col-xs-5">
        <div id="questionnaire-summary" class="well minimized">
            <header><strong>Your analysis is <span id="questionnaire-percentage-complete">0</span>% complete</strong><button id="questionnaire-summary-details" class="pull-right btn btn-link hide" data-toggle="collapse" data-target="#questionnaire-answer-card" aria-expanded="false"><span class="hide-on-expanded"><i class="fa fa-fw fa-lg fa-info-circle"></i></span><span class="show-on-expanded"><i class="fa fa-fw fa-lg fa-times"></i></span></button></header>
            <div><ul id="questionnaire-answer-card" class="list-unstyled collapse"></ul></div>
            <div><button id="questionnaire-submit" class="btn btn-answer btn-block btn-success">Submit<span class="hidden-xs hidden-sm"> it and load another one</span></button></div>
            <div id="questionnaire-conclusion">
                <hr>
                Thank you very much for your analysis! We appreciate any feedback you may have for us so get on <a target="_blank" href="https://github.com/geotagx/pybossa/issues"><strong>GitHub</strong></a> or <a href="mailto:eleanor.rusack@unitar.org?Subject=GeoTag-X feedback" target="_top"><strong>send us an email</strong></a>.
            </div>
            <div id="questionnaire-progress-bar"></div>
        </div>
        <button id="questionnaire-rewind" class="btn btn-sm btn-default btn-block btn-primary show-on-task-loaded" disabled><i class="fa fa-fw fa-lg fa-arrow-circle-left"></i>&nbsp;Go to previous question</button>
        <div id="questionnaire-filter" class="question hide">
            <header>Is this photo spam?</header>
            <p>Sometimes, people collecting photos might accidentally send something that is not useful like an advertisement. If this photo is an advertisement or similar, you should choose <button class="btn btn-danger btn-xs" disabled>Yes</button> and it will be skipped.</p>
            <p>If you are not sure whether the photo is spam, selecting <button class="btn btn-xs btn-warning" disabled>I don't know</button> will also skip the image.</p>
            <p>If you do not see an image, notify us by selecting <button class="btn btn-xs btn-default" disabled>No Photo</button> and we'll fix it as soon as possible.</p>
            <p>Selecting <button class="btn btn-success btn-xs" disabled>No</button> will allow you to proceed with the analysis.</p>
            <div class="answer">
                <button class="btn btn-answer btn-success btn-sm" value="No">No</button>
                <button class="btn btn-answer btn-danger  btn-sm" value="Yes">Yes</button>
                <button class="btn btn-answer btn-warning btn-sm" value="Unknown">I don't know</button>
                <button class="btn btn-answer btn-default btn-sm" value="NoPhoto">No photo</button>
            </div>
        </div>


        {% include 'render_questions.html' %}
        {% include 'disqus_comments.html' %}
    </section>
    <section id="image-section" class="col-xs-7">
        <div class="row">
            <p   id="image-loading"><i class="fa fa-spinner fa-pulse hide-on-task-loaded"></i></p>
            <img id="image" class="img-responsive show-on-task-loaded">
            <div id="image-source-container" class="show-on-task-loaded"><strong>The original photo and its context can be found <a id="image-source" rel="nofollow" target="_blank">here<i class="fa fa-external-link"></i></a><strong></div>
            <div id="image-zoomtip" class="show-on-task-loaded">Hover your mouse over the image and use the scroll wheel to zoom in and out.<hr></div>
            <div id="image-analysis-reminder" class="show-on-task-loaded">By contributing to the Yamuna Flood Waters project, you're helping ... [Remind the user why their contribution is important]</div>
        </div>
    </section>
</div>

{{ include 'render_static_files.html' }}

<script>
// Run the application.
geotagx.task.run("yamuna_waters", function(question, answer, $submitter){
    switch (question){
        case 1: // Can you see any water in the photo?
        case 7: // Can you see any sources of drinking water?
            geotagx.task.saveAnswer(answer);
            if (answer === "Yes")
                geotagx.task.showNextQuestion();
            else
                geotagx.task.finish();
            break;
        case 2: // Can you see small pools of water?
            geotagx.task.saveAnswer(answer);
            geotagx.task.showQuestion(answer === "Yes" ? 3 : 4);
            break;
        case 3: // Are these small pools of water near human shelters or a settlement?
            geotagx.task.saveAnswer(answer);
            geotagx.task.showQuestion(7);
            break;
        case 4: // Can you see a large body of water?
            geotagx.task.saveAnswer(answer);
            geotagx.task.showQuestion(answer === "Yes" ? 5 : 6);
            break;
        case 5: // Can you see any signs of fast moving water?
        case 6: // Can you see any of the following flood protection measures?
        case 8: // Which sources of drinking water can you see?
            geotagx.task.saveAnswer(answer === "Done" ? $submitter.siblings("input:checked") : answer);
            geotagx.task.showNextQuestion();
            break;
        case 9: // Have they been affected by the flood waters?
        default:
            geotagx.task.saveAnswer(answer);
            geotagx.task.showNextQuestion();
            break;
    }
});
</script>
